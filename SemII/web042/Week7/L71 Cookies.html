<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>L71 Cookies</title>
	<script type="text/javascript">
	function setCookie() {
		var name = prompt("Name : ", "");
		var current = new Date;
		var expiry = new Date;
		expiry.setTime(current.getTime() + 30*24*60*60*1000);

		var ckName = "name=" + name + ";"
		+ "expires=" + expiry + ";"
		+ "path=/";
		var ckTime = "createdOn=" + current + ";"
		+ "expires=" + expiry + ";"
		+ "path=/";

		document.cookie = ckName;
		document.cookie = ckTime;
	}
	function getCookie() {
		var decodedCookie = decodeURIComponent(document.cookie);
		var cookieArr = decodedCookie.split(";");

		var name, createdOn;
		 for(var i = 0; i < cookieArr.length; i++) {
		 	if(i === 0)
    			name = cookieArr[i].substring(5); //skip initial "name=" substring
    		else if(i === 1)
    			createdOn = cookieArr[i].substring(11); //skip initial "createdOn=" substring
    	}

		var responseText = "Welcome again! " + name
						   + ". Your last visit was on " + createdOn
						   + ".";
		document.getElementById("l").innerText = responseText;
	}
	</script>
</head>
<body></body>
	<input type=button value="Bake Cookie" onclick="setCookie();"></input><br/>
	<input type=button value="Eat Cookie" onclick="getCookie();"></input><br/>
	<label id="l"></label>
</html>